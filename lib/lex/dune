(rule
  (targets lexer.ml)
  (deps (:x lexer.mll))
  (action (run ocamllex -q %{x})))

(library
  (name lex)
  (libraries base)
  (preprocess (pps ppx_deriving.std)))